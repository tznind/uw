# Data Attributes Reference

This document lists all `data-*` attributes used in the Rogue Trader character sheet system.

## Attribute Reference Table

| Attribute | Description | Gets Suffixed | Usage Context |
|-----------|-------------|---------------|---------------|
| `data-card-id` | Identifies a specific card instance | No | System-generated, used for card lookups |
| `data-move-id` | Identifies a specific move | No | System-generated, used for move references |
| `data-move-category` | Category of a move (e.g., "basic", "advanced") | No | Generated by move system |
| `data-track-id` | Internal identifier for track system | No | System-generated for track instances |
| `data-roles` | Role restrictions for moves (e.g., `"Navigator,Rogue Trader"` or `"*"`) | No | Move/card availability filtering |
| `data-format-text` | Markdown text to be formatted (value becomes "formatted" after processing) | No | Text formatting system |
| `data-no-persist` | Prevents element from being persisted to URL | No | Persistence system flag |
| **Cards: Tracks** |
| `data-track` | Marks element as a track container (marker attribute) | No | Required to auto-initialize tracks |
| `data-track-name` | Display name for track (e.g., "Loyalty", "Wounds") | No | Track configuration |
| `data-track-max` | Maximum value for track (default: 5) | No | Track configuration |
| `data-track-shape` | Shape of track markers: `"circle"`, `"square"`, `"triangle"`, `"hexagon"` | No | Track configuration |
| `data-track-dynamic` | Allow user to change max value (`"true"` or `"false"`) | No | Track configuration |
| **Cards: Dynamic Tables** |
| `data-dynamic-table` | Marks table as dynamic (marker attribute) | No | Required to auto-initialize tables |
| `data-table-max` | Maximum number of rows allowed (default: unlimited) | No | Table configuration |
| `data-field` | Column field name in dynamic table (e.g., `"name"`, `"hp"`) | No | Table column definition |
| `data-type` | Input type for table column: `"text"`, `"number"`, `"checkbox"` | No | Table column configuration |
| `data-options` | Comma-separated dropdown options (e.g., `"Ready,Injured,Recovering"`) | No | Table column configuration |
| `data-table-add` | References table ID for "add row" button | **Yes** | Links button to table |
| `data-table-clear` | References table ID for "clear all" button | **Yes** | Links button to table |
| **Cards: Visibility** |
| `data-hide-if-untaken` | Marks element to be hidden when it's untaken and "Hide untaken moves" is enabled | No | Conditional visibility |
| **UI: Help System** |
| `data-help-title` | Title for help tooltip | No | Help icon tooltips |
| `data-help-text` | Description text for help tooltip | No | Help icon tooltips |
| **UI: Text Formatting** |
| `data-term-title` | Glossary term display name | No | Generated by text formatter |
| `data-term-text` | Glossary term description | No | Generated by text formatter |

## Suffixing for Duplicate Cards

When cards are used as inline cards (granted by moves) and can have multiple instances, certain attributes need to be suffixed to ensure each instance is independent:

**Attributes that get suffixed:**
- Standard HTML: `id`, `name`, `for`
- Data attributes that reference IDs: `data-table-add`, `data-table-clear`

**Why these get suffixed:**
These attributes contain references to other elements by ID. When a card is duplicated, these IDs must be unique, so both the target ID and the reference must be suffixed with the same value.

**Example:**
```html
<!-- Original card HTML -->
<table id="sq_members" data-dynamic-table>...</table>
<button data-table-add="sq_members">Add Row</button>

<!-- After suffixing with "_2" -->
<table id="sq_members_2" data-dynamic-table>...</table>
<button data-table-add="sq_members_2">Add Row</button>
```

## Adding New Data Attributes

When adding new data attributes:

1. **If the attribute contains an ID reference** (like `data-table-add`), add it to the `ATTRIBUTES_TO_SUFFIX` array in `moves/inline-cards.js`
2. **If the attribute is configuration or a marker**, do NOT add it to the suffix list
3. **Update this documentation** with the new attribute

## Implementation

See `moves/inline-cards.js` for the suffixing implementation using the `ATTRIBUTES_TO_SUFFIX` whitelist.
